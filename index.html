<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>The Barbarian Steppe</title>
		<link rel="icon" type="image/png" href="img/logo.png">

		<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
		<link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

		<link rel="stylesheet" type="text/css" href="css/mycss.css">
		<link rel="stylesheet" type="text/css" href="css/codemirror.css">
		<link rel="stylesheet" type="text/css" href="css/show-hint.css">
		<link rel="stylesheet" type="text/css" href="css/lint.css">
		<link rel="stylesheet" type="text/css" href="css/introjs.css">

		<script type="text/javascript" src="js/jquery-3.1.0.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.js"></script>
		<script type="text/javascript" src="js/intro.js"></script>
		<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jshint/r07/jshint.js"></script>

		<script type="text/javascript" src="js/CodeMirror/codemirror.js"></script>
		<script type="text/javascript" src="js/CodeMirror/javascript.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/active-line.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/closebrackets.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/matchbrackets.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/trailingspace.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/show-hint.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/javascript-hint.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/lint.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/javascript-lint.js"></script>
		<script type="text/javascript" src="js/CodeMirror/addon/panel.js"></script>
	</head>

	<body>
		<!-- navbar -->
		<nav class="navbar navbar-default navbar-inverse">
			<div class="container" style="width: auto; height: 100%;">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">
						<img alt="Logo" src="img/logo.png">
                        <span class="nav-title">The Barbarian Steppe</span>
					</a>
				</div>

				<ul class="nav navbar-nav">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#levelsModal" id="levels">
                            <i class="fa fa-exchange" aria-hidden="true"></i>
                            <span>Levels</span>
                        </a>
                    </li>
					<li>
						<a href="#" data-toggle="modal" data-target="#accountModal" id="user" >
							<i class="fa fa-user" aria-hidden="true"></i>
                            <span><%= username %></span>
						</a>
					</li>
					</ul>
					<hr style="margin-right: 20px;">
					<ul class="nav navbar-nav" style="margin: 0; padding: 0">
				    <li>
                        <a href="#" onclick="startTutorial();">
                            <i class="fa fa-book" aria-hidden="true" ></i>
                            <span>Tutorial</span>
                        </a>
                    </li>
					<li>
						<a href="/logout">
							<i class="fa fa-sign-out" aria-hidden="true" ></i>
                            <span>Logout</span>
						</a>
					</li>
				</ul>
			</div>
		</nav>

		<!-- LEVELS Modal -->
		<div id="levelsModal" class="modal fade" role="document">
			<div class="modal-dialog">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Level selection</h4>
					</div>

                    <script type="text/javascript">
                        $(document).ready(function() {
                            var lvl = "1";

                            $("#level-selector").find('.btn').click( function() {
                                $(".btn-primary").removeClass('btn-primary');
                                $(this).addClass('btn-primary');

                                lvl = $(this).text();

                                $('.level-description').children('h3').html("Level " + lvl.toString());
                                $('.level-description').children('p').html("<span>Example text for level " + lvl + "</span>");
                            });

                            $("#load-level-btn").click(function(){
								editor.applySolution();
                                level = parseInt(lvl);

                                //parse json for chat text
                                $.getJSON("lvl/levels-chat.json", function(data){
                                    $("#chat-text").html(data[level - 1]);
                                });

								$("#chat-panel").html("Livello " + lvl);
                                editor.loadCode(level);
                                missileCommand(true);
                            });
                        });
                    </script>

					<div class="modal-body" id="level-selector">
						<div class="btn-group btn-group-justified" role="group" aria-label="Livello">
						  <a type="button" role="button" class="btn btn-default">1</a>
						  <a type="button" role="button" class="btn btn-default">2</a>
						  <a type="button" role="button" class="btn btn-default">3</a>
						  <a type="button" role="button" class="btn btn-default">4</a>
						  <a type="button" role="button" class="btn btn-default">5</a>
						  <a type="button" role="button" class="btn btn-default">6</a>
						  <a type="button" role="button" class="btn btn-default">7</a>
						  <a type="button" role="button" class="btn btn-default">8</a>
						  <a type="button" role="button" class="btn btn-default">9</a>
						</div>

						<div class="level-description">
							<h3></h3>
							<p>Select the level you want to play</p>
						</div>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
						<button type="button" class="btn btn-default" data-dismiss="modal" id="load-level-btn">Play</button>
					</div>
				</div>
			</div>
		</div>

        <!-- ACCOUNT Modal -->
		<div id="accountModal" class="modal fade" role="document">
			<div class="modal-dialog modal-lg" >
			<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h4 class="modal-title">Profile</h4>
					</div>

					<div class="modal-body">
						<div class="row">
							<div class="col-md-6">
								<div class="panel panel-default">
									<div class="panel-body">
										<div class="row">
											<div class="col-md-6">
												<img src="img/default-avatar.png" class="avatar-circle">
											</div>
											<div class="col-md-6">
												<h4 name="username"><%= username %></h4>
												<p name="score">Punteggio: </p>
											</div>
										</div>
									</div>
								</div>
							</div>
                            <div class="col-md-6">
                                <p>Overall progress:</p>
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" aria-valuenow="" aria-valuemin="0" aria-valuemax="100">

                                    </div>
                                </div>
                            </div>
						</div>


						<p>Badges obtained:</p>
						<table class="table table-bordered">
							<tbody>
								<tr>
									<td class="col-md-3">
										<img class="mybadge" src="img/badge.png">
										badge1
									</td>
									<td class="col-md-3">
										<img class="mybadge" src="img/badge_bw.png">
										badge2
									</td>
									<td class="col-md-3">badge3</td>
									<td class="col-md-3">badge4</td>
								</tr>
								<tr>
									<td class="col-md-3">badge5</td>
									<td class="col-md-3">badge6</td>
									<td class="col-md-3">badge7</td>
									<td class="col-md-3">badge8</td>
								</tr>
							</tbody>
						</table>

						<p>Leaderboard:</p>
						<table class="table table-striped" id="leaderboard">
							<thead>
								<tr>
									<th>#</th>
									<th>Username</th>
									<th>Score</th>
								</tr>
							</thead>
							<tbody>

							</tbody>
						</table>
					</div>

					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>


		<div class="container">
			<div class="row" style="margin-top: 1em;">
				<!-- Parte sx -->
				<div class="col-lg-6">
                    <div class="panel panel-default chat" id="chat-panel">
                        <div class="panel-heading">Level 1</div>
                        <div class="panel-body">
                            <img class="portrait" src="img/general.png">
                            <div id="chat-text">
                                this is level 1. your have to fix the missle speed as it appears to be fucking slow!
                            </div>
                        </div>
                    </div>

					<div class="row" id="mc-container">
						<canvas id="miscom" class="game center-block" width="510" height="460">
							Missile Command
						</canvas>
					</div>
				</div>

				<!-- Parte dx -->
				<div class="col-lg-6">
					<div class="row">
						<div class="col-lg-12" id="editor-container">
							<!-- editor -->
							<textarea class="hidden" id="code" name="code">Game code</textarea>
						</div>
					</div>
					<div class="row floating-buttons">
						<div class="col-lg-12" align="center">
                        	<!-- CONFIRM CODE BUTTON -->
							<button type="button" id="ButtonExecCode" class="btn btn-success btn-lg" >
								<i class="fa fa-check" aria-hidden="true"></i>
							</button>
                        	<!-- RESET CODE BUTTON -->
							<button type="button" id="ButtonResetCode" class="btn btn-danger btn-lg" >
								<i class="fa fa-undo" aria-hidden="true"></i>
							</button>

                       		<!-- ASK FOR HELP BUTTON -->
                            <button type="button" id="ButtonGetHelp" class="btn btn-info btn-lg" >
                                <i class="fa fa-question-circle" aria-hidden="true"></i>
                            </button>
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer class="footer">
            <h4>The Barbarian Steppe</h4>
			<span>Alice Valentini, Lorenzo Cazzoli, Luca Casini, Manfredi Giordano</span>
			<br>
			<span>Project for <em>Interazione Persona-Computer</em> exam, University of Bologna, academic year 2015-2016</span>
		</footer>

		<!-- script  -->
		<script type="text/javascript" src="/missile_command.js"></script>
		<script type="text/javascript" src="js/editor.js"></script>
		<script type="text/javascript" src="js/app.js"></script>

		<noscript>You need to turn JavaScript on.</noscript>
	</body>
</html>
